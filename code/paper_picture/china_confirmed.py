# -*- coding: utf-8 -*-
# @Author  : Qi Shao

"""
中国累计确诊人数折线图
"""

# load package
import pandas as pd
import matplotlib.pyplot as plt
import matplotlib.dates as mdate

# main
if __name__ == '__main__':

    plt.rcParams['font.sans-serif']=['Times New Roman']#用来正常显示中文标签
    plt.rcParams['axes.unicode_minus']=False#用来正常显示负号

    df = pd.read_csv("./output/COVID_china.csv")
    y = df['confirmed'].to_list()

    date=pd.date_range('2019-12-01','2020-04-23')
    date = ['2019-12-01','2019-12-02','2019-12-03','2019-12-04','2019-12-05',
    '2019-12-06','2019-12-07','2019-12-08','2019-12-09','2019-12-10','2019-12-11',
    '2019-12-12','2019-12-13','2019-12-14','2019-12-15','2019-12-16','2019-12-17',
    '2019-12-18','2019-12-19','2019-12-20','2019-12-21','2019-12-22','2019-12-23',
    '2019-12-24','2019-12-25','2019-12-26','2019-12-27','2019-12-28','2019-12-29',
    '2019-12-30','2019-12-31','2020-01-01','2020-01-02','2020-01-03','2020-01-04',
    '2020-01-05','2020-01-06','2020-01-07','2020-01-08','2020-01-09','2020-01-10',
    '2020-01-11','2020-01-12','2020-01-13','2020-01-14','2020-01-15','2020-01-16',
    '2020-01-17','2020-01-18','2020-01-19','2020-01-20','2020-01-21','2020-01-22',
    '2020-01-23','2020-01-24','2020-01-25','2020-01-26','2020-01-27','2020-01-28',
    '2020-01-29','2020-01-30','2020-01-31','2020-02-01','2020-02-02','2020-02-03',
    '2020-02-04','2020-02-05','2020-02-06','2020-02-07','2020-02-08','2020-02-09',
    '2020-02-10','2020-02-11','2020-02-12','2020-02-13','2020-02-14','2020-02-15',
    '2020-02-16','2020-02-17','2020-02-18','2020-02-19','2020-02-20','2020-02-21',
    '2020-02-22','2020-02-23','2020-02-24','2020-02-25','2020-02-26','2020-02-27',
    '2020-02-28','2020-02-29','2020-03-01','2020-03-02','2020-03-03','2020-03-04',
    '2020-03-05','2020-03-06','2020-03-07','2020-03-08','2020-03-09','2020-03-10',
    '2020-03-11','2020-03-12','2020-03-13','2020-03-14','2020-03-15','2020-03-16',
    '2020-03-17','2020-03-18','2020-03-19','2020-03-20','2020-03-21','2020-03-22',
    '2020-03-23','2020-03-24','2020-03-25','2020-03-26','2020-03-27','2020-03-28',
    '2020-03-29','2020-03-30','2020-03-31','2020-04-01','2020-04-02','2020-04-03',
    '2020-04-04','2020-04-05','2020-04-06','2020-04-07','2020-04-08','2020-04-09',
    '2020-04-10','2020-04-11','2020-04-12','2020-04-13','2020-04-14','2020-04-15',
    '2020-04-16','2020-04-17','2020-04-18','2020-04-19','2020-04-20','2020-04-21',
    '2020-04-22','2020-04-23', '2020-04-24']

    n = len(date)

    fig = plt.figure(figsize=(15, 10))

    plt.plot(range(n), y, '-b',linewidth=1.0)

    interval = ['2019-12-01', '2020-01-01', '2020-02-01', '2020-03-01',  '2020-04-01']
    x = [date.index(i) for i in interval]

    plt.xticks(x, interval, rotation=0)

    start = date.index('2020-01-17')
    control = date.index('2020-01-25')
    end = date.index('2020-03-01')

    plt.plot([start, start], [-2000, 1000000], '--', color='limegreen', linewidth=2)
    plt.plot([control, control], [-2000, 1000000], '--', color='darkorange', linewidth=2)
    plt.plot([end, end], [-2000, 1000000], '--', color = 'violet' ,linewidth=2)
 

    plt.tick_params(labelsize=20)

    plt.xlim(-1, n+1)
    plt.ylim(-2000, 86000)

    #设置横纵坐标的名称以及对应字体格式  
    font = {'family' : 'Times New Roman',  
    'weight' : 'normal',  
    'size'   : 25,  
    }

    plt.xlabel('Date',font)
    plt.ylabel('cumulative confirmed cases',font)

    plt.savefig('./picture/china_COVID.eps', dpi=400)

    plt.show()

